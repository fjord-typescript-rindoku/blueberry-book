# 【第3週】ブルーベリー本輪読会🫐🫐<br />(2022-05-28)

###### tags: `ブルーベリー本`

- [開催概要](https://hackmd.io/1kCgi6_tSGukG0KZrqDLvA)
- [ブルーベリー本輪読会ノートまとめ](https://hackmd.io/Ih6bdReuR3eQpYkGaCx8pg)
- [プロを目指す人のためのTypeScript入門-サポートページ](https://gihyo.jp/book/2022/978-4-297-12747-3/support)（正誤表・サンプルコードのダウンロードページ）

---
## 2022-05-28（土）
### タイムスケジュール
- 雑談(5min) ~9:05
- 輪読(40min) ~9:45
- 前半の記入(5min) ~9:50
- 休憩(10min) ~10:00
- 輪読(45min) 前半での疑問の解消含む ~10:45
- まとめ(15min) ~ 11:00

### 進行係

- 前半
    - @saki
- 後半
    - @obregonia

### ドライバー

- 前半
    - @cafedomancer 
- 後半
    - @mani-inuzuka

### 読んだところ

- p.31 「2.2.4 let による変数宣言と変数への再代入」から

- p.42 「2.3.8 nullとundefined」 まで

### 次回

- p.42 「2.3.9 プリミティブ型同士の変換(1)暗黙の変換を体験する」 から

### 自由に使う共有スペース

### わからなかったこと・疑問など

- @mami-inuzuka
    - リテラルがまだしっくりきていない🥲
        - 「数値リテラルを用いることで数値をプログラムの世界に持ち込んで使うことができる」というのもよくわからなかった
        - 最終的に実行される機械語とかの理解が足りてないからそう思うのかな？
        - リテラルはなんらかの値を生み出すための「式」
            - 計算結果が表示されるから `0b1010` は計算されて`10` となるし、`1e8` は計算されて `1000000` となる、みたいな感じ？
        - 言語の機能としてサポートされている値を生成するなにか(?): `1`, `'a'`, `{}`
            - なんとなくわかるような...わからないような😂

- @Saki
    - 2.3.3の最初のサンプルコードは、普段人間が使い慣れている10進数だけでなく、同じ数値を表す色んな表現方法(2,8,10進数)があって、TSはそれも数値リテラルとして使えるよ〜ということを言いたいのですかね?
        - そうだと思います
        - →ありがとうございます!

- @haruguchi
    - 化学的記数法(e)を使う場面てどんな時だろう？ :tashikani: 
        - 物理や化学が関係する場合かな？
        - もしくは単純に値を短く書きたい場合？
        - たぶん使ったことないです :joy: :smiley_cat: 

- @maeda
  - null→変数・プロパティは定義されてるけど値が入ってない
  - undefined→もう少し広いイメージ。なんでもundefined
  	- `let hoge`に`undefined`が入ってるのはなんでなんだろう。。。
      - なんでと言われると難しいけど、初期化されていないからですね。初期化されていないときの変数の中身は `undefined` になるのだと思います (公理みたいなもの？) 。`null` は明示的に代入しないと `null` にはなりません。
      	- 難しい。。😂
      	- >初期化されてない時の変数の中身は`undefined`になる
      	- これは覚えておこうと思います！（公理的なものであるという認識で）
      	- 「`let hoge`と値を入れずに定義した際に値には`undefined`が入っている」というのを丸暗記していたので、梅本さんに説明受けた時に自分の認識が逆だということに気付かされました。。。
  	
### 各自の疑問点や気づき、学んだこと

- @cafedomancer 
    - Records と Tuples という primitive を初めて知った！
        - immutable な object と immutable な array みたいなもの
    - `const binary = 0b1010;` の変数 `binary` の type は `10` になります！ (びっくり)
    - `let` を使わなきゃいけない場面ってどんなときだろう？ `for (let i = 0; i < 100; i++)` くらいしか思いつかないな
    - Unicode: コンピュータで扱える文字の集合, UTF-16: エンコーディング方式
    - 倍精度浮動小数点数の 64 ビットのうち、53 ビットが数値を表すのに使われていて、1 ビットが符号を表すのに使われている。残りの 10 ビットは指数を表している。
    - > 全てundefinedにします。理由はオプショナルチェイニングによってnullがundefinedになる非対称性があるから。undefinedとnullを使い分けるくらいならもっと明示的な値を使います。おわり（？）
        - 非対称性があることにどういう問題あるのかよくわからないので賛同できないけど、すべての元凶はそもそも `null` と `undefined` の 2 つがあることなのでは、という気がした。
        - でも確かに `something | null | undefined` みたいな型を書くのは面倒くさい気もする

- @paru871 
    - プリミティブ(primitive)・・・原始的な
    - プロポーザル(→1.2.3 P13)
        - EcmaScriptに追加される機能の管理の単位。JSはステージ4で採用内定だがTSはステージ3でサポートが開始される。ECMAScriptのプロポーザルをウォッチしておくとTSの今後の機能追加も知ることができる。
    - テンプレートリテラル・・・\`Hello, world!\`のようにバッ
ククオートで囲う文字列リテラル
        - テンプレートリテラルの中では`${ 式 }`で式展開できる
    - 真偽値リテラルのfalseとtrueは予約語で、変数名としては使えない
    - TSの言語仕様上ではundefinedのほうがサポートが厚い？？(ここはわからないので今後感じ取っていく)

- @maeda 
  - tscはtypescriptコンパイラの略
  - anyは全ての型の親のような存在
  - `let hoge;`はany型になる
      - ふつうは `noImplicitAny` (or `strict`) を true に設定して、変数が意図せず `any` になってしまうことを避けます
      	- noImplicitAny👀
      	- https://www.typescriptlang.org/tsconfig#noImplicitAny
      	- これかな？？tsconfig.jsonで設定する？
            - そうです！
            - 🙏
  - tuples→タプルズ（？？？という状態）
  - （式と文の違いがきちんとわかってない）
  	- `const hoge = "hoge"`→文
  	- 1, "foo"→式
  - null→変数・プロパティは定義されてるけど値が入ってない
  - undefined→もう少し広いイメージ。なんでもundefined
  - リテラル型という型がある
  	- https://typescriptbook.jp/reference/values-types-variables/literal-types

- @haruguchi
    - 変数宣言で値を初期化せず、型注釈をつけない場合、変数の型がanyになってしまうことがわかった。
    - 変数に型注釈を与えていた場合、値を代入せずに変数を参照した場合コンパイラが教えてくれる。コンパイルエラーありがとう！
        - 江添さんの C++ 入門おもしろそうだった　:kininaru:
    - const と　let で推論の結果が変わることを知った。後ででてくるかな？
    - const の方が型の範囲が厳しい（再代入をしないから） letの方が緩い
    - 絵文字もコードポイント指定で表現できる`\u{xxxx}\u{xxxx}`
    - console.log({val})は新しいオブジェクトを作ってそこで参照している扱いなのかな？

- @Saki
    - let
        - 初期化は文、再代入は式。`console.log`には式しか引数として渡せないので、やってみると分かりやすかった。
        - Rubyの変数は再代入し放題で、定数(再代入しようとするとwarning)があるけどあまり使わない→「書き手を信頼している言語だから」らしい。発展の過程や考え方が違うのだな〜
        - コラム：梅本さん曰く体感9.8割const使う。
        - for文で使うけど、foreach使えば必要ないので、現場の皆さんはそっちを使うそう。
            - `for (elem of array) {console.log()}`はLinterで怒られるらしいので、やっぱりforeach一択ぽい
    - 型を指定しないと`any`扱いになり、すべての型を使えてしまう。
        - `any`はすべての型の親。=型なんでもあり。コンパイルエラーにならない。
    - RecordTaplesはイミュータブルなオブジェクト?
    - Bigintだと正確に数値を表現できる。
        - しかし梅本さんいわく、postgresqlのidがBigintでそれに合わせてJSもBigintにした、くらいしか使ったことが無いとのこと。
        - 2020年に登場したわりには、あまり使ってるのを見かけたことがない気がするが、ブラウザが対応してないからとか?
            - ↑単純に大きい数値を扱う機会があまり多くないからでは？
            → なるほど!🙏

      ```js
      // Number
      > 9007199254740993 
        9007199254740992

      // Bigint  
      > 9007199254740993n
        9007199254740993n
      ```
  - BignintとNumberは混ぜて使えない=足し算とかできない
  - 反対に、文字列リテラル`' '`と`" "`はどっちでもいいし混ざっても動く→現場に合わせることになりそう
  - `${}`の中に入れるのは式。(あまり意識してなかった!)
  - 真偽値リテラル
      - constとletで型注釈?がちがう
      - constにはtrueなどリテラルタイプがはいって、letはbooleanが入る。おそらくletは再代入されるから再代されてもいいように幅をもたせている。ぎゃくにconstは再代入してはいけないからtrueが入っている。
  - nullとundefinedのちがい
      -  [undefinedとnullの違い \| TypeScript入門『サバイバルTypeScript』](https://typescriptbook.jp/reference/values-types-variables/undefined-vs-null#:~:text=undefined%E3%81%A8null%E3%81%AF%E5%A4%A7%E3%81%8D%E3%81%AA,%E3%81%A8%E3%81%84%E3%81%86%E5%BE%AE%E5%A6%99%E3%81%AA%E9%81%95%E3%81%84%E3%81%A7%E3%81%99%E3%80%82)より
      -  共通していること：値が入ってない
      -  違い：`null`は、プログラマーが意図して`null`が入るようにコードを書かないと設定されないもの。`undefined`は、「値が代入されていないため、値がない」(イメージ的には、プログラマーが何かしら値が入ることを想定して書いたのに、思いがけず空になってしまった=undefined と解釈した。)

- @SatoshiHaramura
    - `const`を使って変数宣言しようと思った(`let`はなるべく使わない)
    - `値`には、`プリミティブ`と`オブジェクト`の2種類ある
    - `bigint`+`number`がエラーとなる理由は、任意精度と倍精度で精度が異なるからエラーとしているのかな??
    - テンプレートリテラル便利
    - `console.log({obj})`で、変数名と参照先を表示できる！おお

- @mami-inuzuka
    - TSプログラムにおける値は二つある
        - プリミティブ ... それ以上の構成要素に分解できない単一の値
        - オブジェクト

- @yana-gi 
    - letでの変数宣言
        - 通常変数の9割以上はconstで宣言される（letが使われるのはfor文とかぐらい）
        - 極力constを使って変数を宣言するべき
        - letを使うということは「この変数はあとで再代入されますよ」という意思表示になる
        - 型を書くのも読みやすさやメンテナンスしやすさにつながる
    - プリミティブとオブジェクト
        - オブジェクトは複数の値から構成される
        - プリミティブはそれ以上の構成要素に分解できない値
    - 数値型
        - number型では整数と小数の区別がない
    - 文字列型
        - 文字列リテラルとテンプレートリテラル
    - null と undefined
        - undefinedの方がサポートが手厚い
        - どちらをどのように使うかは宗派がある

- @AntiSatori
    - 数値型の扱い
        - TypeScriptの数値型はIEEE 754倍精度浮動小数点
        - 浮動小数点のことは知ってるけど実装のことをあまり知らないので理解するために一度自分で作ってみたい


### 本日の振り返り(よかった点・次回に向けての改善点等)

- @haruguchi
    - 一人では読み飛ばすようなことが結構深く掘り下げられて満足です。
    - タイムキープは気にせずやってもらって大丈夫です〜！！

- @cafedomancer 
    - 人がいっぱい！

- @Saki
    - JSPrimerとはまた違って説明の仕方・切り口で勉強になりました!

- @yanagi
    - JSの知識もあやふやなのでありがたい

- @Maeda
	- JSの知識大事！知らないことがたくさんあって勉強になる。
